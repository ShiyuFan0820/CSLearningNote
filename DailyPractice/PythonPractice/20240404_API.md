# API

## My Workout Tracker

1. This practice is to build an exercise tracking application using Python.
2. Users can insert what exercise they did and their exercise can be recorded automatically to Google Sheets.
3. The application should track the date, how long the exercises is, and what is the amount of calories.
4. The API used in this project is [Nutritionix API website](https://www.nutritionix.com/business/api), and [Sheety website](https://sheety.co/).

## What Will Be Made in The End

[<img width="600" alt="image" src="https://github.com/ShiyuFan0820/CSLearningNote/assets/149340606/34cf8b9d-4169-42ab-b70d-9d3ef5eb74dd">
](https://youtu.be/ZgfGhCOs71U)

## Steps

1. Go to Google Spreadsheet to create a [My_Workout Spreadsheet](https://docs.google.com/spreadsheets/d/11Ov7eWig5ZOEH1P89ALjBA7K5Z95qLASuILEwQU6u1o/edit#gid=0).
2. Go to [Nutritionix API website](https://www.nutritionix.com/business/api) and select `Get Your API Key` to sign up for a free account.
3. Go to [Sheety website](https://sheety.co/) to connect the Google sheet.
4. Write the code.
```py
import requests
from datetime import datetime

# Define variables to store endpoint information.
exercise_endpoint = "https://trackapi.nutritionix.com/v2/natural/exercise"
sheety_endpoint = "https://api.sheety.co/596407487435113fa1b524e86a87b95d/workoutTracker/workouts"

# Define variables to store API information.
APIID = "0f0ceb38"
APIKey = "5212e21c22010eabea57ae0802a1bd65"

# Prepare relevant parameters according to the parameter requirements on the website.
headers = {
    "x-app-id": APIID,
    "x-app-key": APIKey
}

exercise_text = input("What exercise you did today? ")
params = {
    "query": exercise_text
}
# Get exercises information.
exercise_response = requests.post(url=exercise_endpoint, headers=headers, json=params)
exercise_result = exercise_response.json()
print(exercise_result)

today_date = datetime.now().strftime("%d/%m/%Y")
now_time = datetime.now().strftime("%X")

for exercise in exercise_result["exercises"]:
    sheet_inputs = {
        "workout": {
            "date": today_date,
            "time": now_time,
            "exercise": exercise["name"].title(),
            "duration (min)": exercise["duration_min"],
            "calories": exercise["nf_calories"]
        }
    }
    sheety_response = requests.post(url=sheety_endpoint, json=sheet_inputs)
```
